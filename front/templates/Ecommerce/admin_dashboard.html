<!DOCTYPE html>
{% load static %}
{% load cart_template_tags %}
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport"
              content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Admin </title>
        <!-- Font Awesome -->
        <link rel="stylesheet"
              href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
        <!-- Bootstrap core CSS -->
        <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
        <!-- Material Design Bootstrap -->
        <link href="{% static 'css/mdb.min.css' %}" rel="stylesheet">
        <!-- Your custom styles (optional) -->
        <link href="{% static 'static' %}" rel="stylesheet">
        {% comment %} Below first script for graph i.e chart.min.js {% endcomment %}
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js" integrity="sha512-QSkVNOCYLtj73J4hbmVoOV6KVZuMluZlioC+trLpewV8qMjsWqlIQvkn1KGX2StWvPMdWGBqim1xlC8krl1EKQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        {% comment %} <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> {% endcomment %}
        <style type="text/css">
    html,
    body,
    header,
    .carousel {
      height: 60vh;
    }

    @media (max-width: 740px) {

      html,
      body,
      header,
      .carousel {
        height: 100vh;
      }
    }

    @media (min-width: 800px) and (max-width: 850px) {

      html,
      body,
      header,
      .carousel {
        height: 100vh;
      }
    }

        </style>
    </head>
    <body>
        <!-- Navbar -->
       {% include 'Ecommerce/navbar.html' %}
            <!-- Navbar -->
            <!--Carousel Wrapper-->
            <div id="carousel-example-1z"
                 class="carousel slide carousel-fade pt-4"
                 data-ride="carousel">
                <!--Indicators-->
                <ol class="carousel-indicators">
                    <li data-target="#carousel-example-1z" data-slide-to="0" class="active"></li>
                    <li data-target="#carousel-example-1z" data-slide-to="1"></li>
                    <li data-target="#carousel-example-1z" data-slide-to="2"></li>
                </ol>
                <!--/.Indicators-->
                {% comment %} <!--Slides-->
                                                    <div class="carousel-inner" role="listbox">

                                                      <!--First slide-->
                                                      <div class="carousel-item active">
                                                        <div class="view"
                                                             style="background-image: static('https://mdbootstrap.com/img/Photos/Horizontal/E-commerce/8-col/img%282%29.jpg'); background-repeat: no-repeat; background-size: cover;">

                                                          <!-- Mask & flexbox options-->
                                                          <div class="mask rgba-black-strong d-flex justify-content-center align-items-center">

                                                            <!-- Content -->
                                                            <div class="text-center white-text mx-5 wow fadeIn">
                                                              <h1 class="mb-4">
                                                                <strong>Learn Bootstrap 4 with MDB</strong>
                                                  </h1>

                                                  <p>
                                                    <strong>Best & free guide of responsive web design</strong>
                                      </p>

                                      <p class="mb-4 d-none d-md-block">
                                        <strong>The most comprehensive tutorial for the Bootstrap 4. Loved by over 500 000 users. Video and
                                          written versions
                              available. Create your own, stunning website.</strong>
              </p>

              <a target="_blank"
                 href="https://mdbootstrap.com/education/bootstrap/"
                 class="btn btn-outline-white btn-lg">Start
                free tutorial
                <i class="fas fa-graduation-cap ml-2"></i>
              </a>
            </div>
            <!-- Content -->

          </div>
          <!-- Mask & flexbox options-->

        </div>
      </div>
      <!--/First slide-->

      <!--Second slide-->
      <div class="carousel-item">
        <div class="view"
             style="background-image: static('https://mdbootstrap.com/img/Photos/Horizontal/E-commerce/8-col/img%283%29.jpg'); background-repeat: no-repeat; background-size: cover;">

          <!-- Mask & flexbox options-->
          <div class="mask rgba-black-strong d-flex justify-content-center align-items-center">

            <!-- Content -->
            <div class="text-center white-text mx-5 wow fadeIn">
              <h1 class="mb-4">
                <strong>Learn Bootstrap 4 with MDB</strong>
              </h1>

              <p>
                <strong>Best & free guide of responsive web design</strong>
              </p>

              <p class="mb-4 d-none d-md-block">
                <strong>The most comprehensive tutorial for the Bootstrap 4. Loved by over 500 000 users. Video and
                  written versions
                  available. Create your own, stunning website.</strong>
              </p>

              <a target="_blank"
                 href="https://mdbootstrap.com/education/bootstrap/"
                 class="btn btn-outline-white btn-lg">Start
                free tutorial
                <i class="fas fa-graduation-cap ml-2"></i>
              </a>
            </div>
            <!-- Content -->

          </div> 
          <!-- Mask & flexbox options-->

        </div>
      </div>
      <!--/Second slide-->

      <!--Third slide-->
      <div class="carousel-item">
        <div class="view"
             style="background-image: static('https://mdbootstrap.com/img/Photos/Horizontal/E-commerce/8-col/img%285%29.jpg'); background-repeat: no-repeat; background-size: cover;">

          <!-- Mask & flexbox options-->
          <div class="mask rgba-black-strong d-flex justify-content-center align-items-center">

            <!-- Content -->
            <div class="text-center white-text mx-5 wow fadeIn">
              <h1 class="mb-4">
                <strong>Learn Bootstrap 4 with MDB</strong>
              </h1>

              <p>
                <strong>Best & free guide of responsive web design</strong>
              </p>

              <p class="mb-4 d-none d-md-block">
                <strong>The most comprehensive tutorial for the Bootstrap 4. Loved by over 500 000 users. Video and
                  written versions
                  available. Create your own, stunning website.</strong>
              </p>

              <a target="_blank"
                 href="https://mdbootstrap.com/education/bootstrap/"
                 class="btn btn-outline-white btn-lg">Start
                free tutorial
                <i class="fas fa-graduation-cap ml-2"></i>
              </a>
            </div>
            <!-- Content -->

          </div>
          <!-- Mask & flexbox options-->

        </div>
      </div>
      <!--/Third slide-->

    </div>
    <!--/.Slides-->

    <!--Controls-->
    <a class="carousel-control-prev"
       href="#carousel-example-1z"
       role="button"
       data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next"
       href="#carousel-example-1z"
       role="button"
       data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
    <!--/.Controls-->

  </div>
  <!--/.Carousel Wrapper-->
{% endcomment %}
<!--Main layout-->
{% if user.is_authenticated and user.is_staff and user.is_superuser %}
<main>
    
        <div class="container-fluid row m-5 ">
            <div class="card text-white bg-primary mb-3 mx-3 mt-2"
                 style="max-width: 18rem;">
              
                <div class="card-body">
                    <h5 class="card-title mt-2">
                        Total Number of User: 
                    </h5>
                    <p class="card-title">
                        <h3 class="mx-5">{{users}}<h3>
                    </p>
                </div>
            </div>
            <div class="card text-white bg-success mb-3 mx-3" style="max-width: 18rem;">
               
                <div class="card-body">
                    <h5 class="card-title mt-2">
                        Total Number of Orders
                    </h5>
                    <p class="card-text">
                        <h3 class="mx-5">{{total_ordered}}<h3>
                    </p>
                </div>
            </div>
            <div class="card text-white bg-danger mb-3 mx-3" style="max-width: 18rem;">
               
                <div class="card-body">
                    <h5 class="card-title">
                        <br>
                       
                        Total   Earning
                    </h5>
                    <p class="card-text mx-5">
                        <h3>{% if total_earnings  %}Rs.{{total_earnings}}</h3>{% else %}
                        Rs.0
                        {% endif %}
                          
                    </p>
                    
                </div>
            </div>
            <div class="card text-white bg-danger mb-3 mx-3" style="max-width: 18rem;">
               
                <div class="card-body">
                    <h5 class="card-title">
                        <br>
                       
                        Payment Done
                    </h5>
                    <p class="card-text mx-5">
                        <h3>{{order_payment_done}}</h3>
                    </p>
                    
                </div>
            </div>
            <div class="card text-white bg-warning mb-3" style="max-width: 18rem;">
               
                <div class="card-body">
                    <h5 class="card-title">
                        Orders Pending
                     </h5>
                    <p class="card-text mx-5">
                        <h3>{{order_pending}}</h3>
                    </p>
                    
                </div>
            </div>
            <div class="card text-dark bg-white mb-3 mx-3" style="max-width: 18rem;">
               
                <div class="card-body">
                    <h5 class="card-title">
                        Total Items
                     </h5>
                    <p class="card-text mx-5">
                        <h3>{{total_items}}</h3>
                    </p>
                    
                </div>
            </div>
            <div class="card text-dark bg-white mb-3 mx-3" style="max-width: 18rem;">
               
                <div class="card-body">
                    <h5 class="card-title">
                        Order Delivered
                     </h5>
                    <p class="card-text mx-5">
                        <h3>{{order_delivered}}</h3>
                    </p>
                    
                </div>
            </div>
        </div>
 
</main>
{% comment %} Chart Code {% endcomment %}
<div class="container ">
  <h3>Graph for Last Week</h3>
    <canvas id="myChart" width="300" height="100"></canvas>
<script>
const ctx = document.getElementById('myChart').getContext('2d');
const myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: [{% for days in seven_days_date %}'{{days}}',{% endfor %}],
        datasets: [{
            label: '#Total Number of Orders',
            data: [{% for count_of_orders in seven_days_count %}'{{count_of_orders}}',{% endfor %},1,2,3,4,5,6,7],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
      responsive: true,
      
      maintainAspectRatio: true,
        scales: {
            y: {
                beginAtZero: true,
                stepSize: 1,
            }
            
        }
    }
});
</script>

</div>
<hr>
<div class="container">
  <h3>Last Week Earning</h3>
  <canvas id="myAnotherChart"></canvas>
  <script>
    const labels = [
    {% for days in seven_days_record %}'{{days}}',{% endfor %}
    ];
  
    const data = {
      labels: labels,
      datasets: [{
        label: 'Total Earning in Rs.',
        backgroundColor: 'rgb(255, 99, 132)',
        borderColor: 'rgb(255, 99, 132)',
        data: [{% for payments in seven_days_earning %}{{payments}},{% endfor %}],
      }]
    };
  
    const config = {
      type: 'bar',
      data: data,
      options: {}
    };
  </script>
  <script>
    const myAnotherChart = new Chart(
      document.getElementById('myAnotherChart'),
      config
    );
  </script>  
</div>
<hr>
<div class="container mt-3">
    <h3>Order Items Detail</h3>
    <hr>
    <div class="table-responsive">
        <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th scope="col">Order ID</th>
              <th scope="col">Item</th>
              <th scope="col">Quantity</th>
              <th scope="col">Order Date</th>
              <th scope="col">Order Status</th>
              <th scope="col">Payment Status</th>
               <th scope="col">Order Status Update</th>
               <th scope="col">Payment Status Update</th>
            </tr>
          </thead>
          <tbody>
            {% for order in orders %}
            
            {% for items in order.items.all %}
            <tr>
          
              <td>{{items.id}}</td>
              <td>{{items.item.title}}</td>
              <td>{{items.quantity}}</td>
              <td>{{order.ordered_date}}</td>
             
              
              {% if order.order_status == 'D' %}
           
              <td class="btn btn-success">{{order.get_order_status_display}}</td>
              {% else %}
           
              <td >{{order.get_order_status_display}}</td>
              {% endif %}
              <td>{% if order.payment_detail.paid %}<span class="btn btn-success">Paid</span>{% else %}<span class="btn btn-danger">Not Paid</span>{% endif %}
                </td>
              <td><a href="{% url 'update-order-status' order.id %}" class="btn btn-secondary">Update</a></td>
              
              <td><a href="{% url 'update-payment-status' order.payment_detail.id %}" class="btn btn-primary">Payment Update</a></td>
  
            </tr>
            {% endfor %}
            {% endfor %}
            
            
          </tbody>
        </table>
        <hr>
        <a class="btn btn-success" href="{% url 'admin-add-item' %}">Add Product</a>
      </div>
</div>
{% else %}
<h2>You have no access to this Page.This page is for admin</h2>
{% endif %}
<!--Main layout-->
<!--Footer-->
<footer class="page-footer text-center font-small mt-4 wow fadeIn">
    <hr class="my-4">
    <!-- Social icons -->
    <div class="pb-4">
        <a href="https://www.facebook.com/mdbootstrap" target="_blank">
            <i class="fab fa-facebook-f mr-3"></i>
        </a>
        <a href="https://twitter.com/MDBootstrap" target="_blank">
            <i class="fab fa-twitter mr-3"></i>
        </a>
        <a href="https://www.youtube.com/watch?v=7MUISDJ5ZZ4" target="_blank">
            <i class="fab fa-youtube mr-3"></i>
        </a>
        <a href="https://plus.google.com/u/0/b/107863090883699620484"
           target="_blank">
            <i class="fab fa-google-plus-g mr-3"></i>
        </a>
        <a href="https://dribbble.com/mdbootstrap" target="_blank">
            <i class="fab fa-dribbble mr-3"></i>
        </a>
        <a href="https://pinterest.com/mdbootstrap" target="_blank">
            <i class="fab fa-pinterest mr-3"></i>
        </a>
        <a href="https://github.com/mdbootstrap/bootstrap-material-design"
           target="_blank">
            <i class="fab fa-github mr-3"></i>
        </a>
        <a href="http://codepen.io/mdbootstrap/" target="_blank">
            <i class="fab fa-codepen mr-3"></i>
        </a>
    </div>
    <!-- Social icons -->
  
</footer>
<!--/.Footer-->
<!-- SCRIPTS -->
<!-- JQuery -->
<script type="text/javascript" src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
<!-- Bootstrap tooltips -->
<script type="text/javascript" src="{% static 'js/popper.min.js' %}"></script>
<!-- Bootstrap core JavaScript -->
<script type="text/javascript" src="{% static 'js/bootstrap.min.js' %}"></script>
<!-- MDB core JavaScript -->
<script type="text/javascript" src="{% static 'js/mdb.min.js' %}"></script>
<!-- Initializations -->
<script type="text/javascript">
    // Animations initialization
    new WOW().init();
    $(".alert").alert('close')

</script>
</body>
</html>
